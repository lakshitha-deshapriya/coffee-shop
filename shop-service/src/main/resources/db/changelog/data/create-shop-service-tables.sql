CREATE TABLE SHOP (
            SHOP_ID         SERIAL NOT NULL PRIMARY KEY,
            NAME            VARCHAR(100) NOT NULL,
            LONGITUDE       NUMERIC(8, 6) NOT NULL,
            LATITUDE        NUMERIC(8, 6) NOT NULL,
            ADDRESS         VARCHAR(500),
            CONTACT_NO      VARCHAR(15),
            NO_OF_QUEUES    INT4 NOT NULL,
            QUEUE_SIZE      INT4 NOT NULL,
            OPEN_TIME       TIME,
            CLOSE_TIME      TIME,
            CREATED_BY      INT4 NOT NULL,
            LAST_MODIFIED   TIMESTAMP);

COMMENT ON TABLE SHOP IS 'Shop in the App';
COMMENT ON COLUMN SHOP.SHOP_ID IS 'Id of Shop';
COMMENT ON COLUMN SHOP.LONGITUDE IS 'Longitude of shop';
COMMENT ON COLUMN SHOP.LATITUDE IS 'Latitude of shop';
COMMENT ON COLUMN SHOP.ADDRESS IS 'Address of Shop';
COMMENT ON COLUMN SHOP.CONTACT_NO IS 'Shop contact no';
COMMENT ON COLUMN SHOP.NO_OF_QUEUES IS 'Queues in the shop';
COMMENT ON COLUMN SHOP.QUEUE_SIZE IS 'Max No of entry in queue';
COMMENT ON COLUMN SHOP.OPEN_TIME IS 'Shop open time';
COMMENT ON COLUMN SHOP.CLOSE_TIME IS 'Shop close time';
COMMENT ON COLUMN SHOP.CREATED_BY IS 'Created User';
COMMENT ON COLUMN SHOP.LAST_MODIFIED IS 'Shop last modified time';

ALTER TABLE SHOP ADD CONSTRAINT FK_SHOP_USER FOREIGN KEY (CREATED_BY) REFERENCES APP_USER (USER_ID);

CREATE TABLE MENU (
            MENU_ID         SERIAL NOT NULL PRIMARY KEY,
            SHOP_ID         INT4 NOT NULL,
            NAME            VARCHAR(100) NOT NULL,
            DESCRIPTION     VARCHAR(500),
            ACTIVE          BOOLEAN NOT NULL,
            LAST_MODIFIED   TIMESTAMP);

COMMENT ON TABLE MENU IS 'Shop Menu';
COMMENT ON COLUMN MENU.MENU_ID IS 'Menu Id';
COMMENT ON COLUMN MENU.SHOP_ID IS 'Shop Id of Menu';
COMMENT ON COLUMN MENU.NAME IS 'Name of Menu';
COMMENT ON COLUMN MENU.DESCRIPTION IS 'Menu Description';
COMMENT ON COLUMN MENU.LAST_MODIFIED IS 'Last modified time of Menu';

ALTER TABLE MENU ADD CONSTRAINT FK_MENU_SHOP FOREIGN KEY (SHOP_ID) REFERENCES SHOP (SHOP_ID);

CREATE TABLE MENU_ITEM (
            ITEM_ID         SERIAL NOT NULL PRIMARY KEY,
            MENU_ID         INT4 NOT NULL,
            NAME            VARCHAR(100) NOT NULL,
            PRICE           NUMERIC(8,2) NOT NULL,
            AVAILABLE       BOOLEAN NOT NULL,
            LAST_MODIFIED   TIMESTAMP);

COMMENT ON TABLE MENU_ITEM IS 'Shop Menu Item';
COMMENT ON COLUMN MENU_ITEM.ITEM_ID IS 'Menu Item Id';
COMMENT ON COLUMN MENU_ITEM.MENU_ID IS 'Menu Id of Item';
COMMENT ON COLUMN MENU_ITEM.NAME IS 'Name of Menu Item';
COMMENT ON COLUMN MENU_ITEM.PRICE IS 'Menu Item price';
COMMENT ON COLUMN MENU_ITEM.AVAILABLE IS 'Menu Item available or not';
COMMENT ON COLUMN MENU.LAST_MODIFIED IS 'Last modified time of Menu Item';

ALTER TABLE MENU_ITEM ADD CONSTRAINT FK_MENU_ITEM_MENU FOREIGN KEY (MENU_ID) REFERENCES MENU (MENU_ID);
